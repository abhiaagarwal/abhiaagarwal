---
import CalendarPlus from "@lucide/astro/icons/calendar-plus";
import Pen from "@lucide/astro/icons/pen";
import dayjs, { type Dayjs } from "dayjs";
import advancedFormat from "dayjs/plugin/advancedFormat";
import timezone from "dayjs/plugin/timezone";
import utc from "dayjs/plugin/utc";

dayjs.extend(utc);
dayjs.extend(timezone);
dayjs.extend(advancedFormat);

interface Props {
    createdTime: Dayjs;
    lastModified?: Dayjs;
    iconSize?: "sm" | "md";
}

const { createdTime, lastModified, iconSize = "sm" } = Astro.props;

const formattedCreatedTime = createdTime.format("MMMM D, YYYY");
const formattedLastModified = lastModified
    ? lastModified.format("MMMM D, YYYY")
    : null;

const fullCreatedTime = createdTime.format("MMMM D, YYYY [at] h:mm A z");
const fullLastModified = lastModified
    ? lastModified.format("MMMM D, YYYY [at] h:mm A z")
    : null;

const showLastModified =
    formattedLastModified && formattedLastModified !== formattedCreatedTime;

const iconClasses = iconSize === "sm" ? "size-3" : "size-4";
---

<>
    <span
        class="flex items-center gap-1 text-dark-gray"
        title={fullCreatedTime}
    >
        <CalendarPlus class={iconClasses} />
        {formattedCreatedTime}
    </span>
    {
        showLastModified && (
            <span
                class="flex items-center gap-1 text-gray"
                title={fullLastModified}
            >
                <Pen class={iconClasses} />
                {formattedLastModified}
            </span>
        )
    }
</>
